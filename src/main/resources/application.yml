server:
  port: 8081

spring:
  main:
    allow-bean-definition-overriding: true
  application:
    name: relay-server

  # Multipart file upload settings


# AI 서버 URL 설정
ai-servers:
  analysis:
    url: ${AI_ANALYSIS_URL:http://localhost:8000}
    timeout: 600000  # 10분 (스토리 생성 시간 고려)
  image-generation:
    url: ${AI_IMAGE_GENERATION_URL:http://localhost:8001}
    timeout: 30000   # 30초 (이미지 생성 시간)
  rag:
    url: ${AI_RAG_URL:http://localhost:8002}
    timeout: 30000   # 30초 (RAG 학습 및 챗봇 응답 시간)
  music:
    url: ${AI_MUSIC_URL:http://localhost:5001}
    timeout: 10000   # 10초 (음악 추천 시간)

# AWS S3 설정
aws:
  s3:
    bucket: ${AWS_S3_BUCKET}
    region: ${AWS_S3_REGION:ap-northeast-2}
    access-key: ${AWS_ACCESS_KEY}
    secret-key: ${AWS_SECRET_KEY}

# CORS 설정
cors:
  allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:5173}
  allowed-methods: ${CORS_ALLOWED_METHODS:GET,POST,PUT,DELETE,OPTIONS}
  allowed-headers: ${CORS_ALLOWED_HEADERS:*}
  allow-credentials: ${CORS_ALLOW_CREDENTIALS:true}
  max-age: ${CORS_MAX_AGE:3600}

# JWT 설정 (story-backend와 동일한 secret key 사용)
jwt:
  secret: ${JWT_SECRET:your-secret-key-must-be-at-least-256-bits-long-for-hs256-algorithm-please-change-this-in-production}
  access-token-validity: ${JWT_ACCESS_TOKEN_VALIDITY:3600000}  # 1 hour

# Logging
logging:
  level:
    root: INFO
    com.story.relay: DEBUG
    org.springframework.web: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"

# Management (Actuator)
management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: always
